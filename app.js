var A=document.getElementById('myCanvas'),_=A.getContext('2d'),c=document.querySelectorAll('input[type="radio"]'),d=document.getElementById('colorPicker'),B=document.getElementById('color'),f=document.getElementById('positionBtn'),G=document.getElementById('transparencySlider'),H=document.getElementById('clearBtn'),i=document.getElementById('downloadBtn'),j=document.querySelector('.alert'),p=_A=>{let r=parseInt(_A.substring(1,3),16);let g=parseInt(_A.substring(3,5),16);let b=parseInt(_A.substring(5,7),16);let a=G.value;return`rgb(${r}, ${g}, ${b}, ${a})`},q=()=>{let h=~~Math.random()*361;let s=~~Math.random()*20+80;let l=~~Math.random()*20+40;let a=G.value;return`hsla(${h}, ${s}%, ${l}%, ${a})`},R=e=>({x:Math.round(e.clientX-L.left),y:Math.round(e.clientY-L.top)});for(const C of c)C.addEventListener('change',e=>{e.target.id==='color'?d.classList.remove('inactive'):d.classList.add('inactive')});A.width=window.innerWidth*0.8;A.height=window.innerHeight*0.7;let k=!1;let L=A.getBoundingClientRect();let m=!1;let n={x:A.width/2,y:A.height/2};A.addEventListener('mousedown',e=>{if(m)return;k=!0});A.addEventListener('mouseup',e=>k=!1);A.addEventListener('mousemove',e=>{if(!k)return;B.checked?_.strokeStyle=p(d.value):_.strokeStyle=q();let{x:_b,y:_c}=R(e);let{x:D,y:E}=n;o(_b,_c,D,E)});A.addEventListener('click',e=>{m&&(n=R(e),m=!1,j.classList.remove('active'));console.log(e)});var o=(_a,_B,_C,_d)=>{_.beginPath();_.moveTo(_C,_d);_.lineTo(_a,_B);_.stroke();_.closePath()};window.addEventListener('resize',()=>{A.width=window.innerWidth*0.8;A.height=window.innerHeight*0.7;L=A.getBoundingClientRect();n={x:A.width/2,y:A.height/2}});f.addEventListener('click',()=>{m=!0;j.classList.add('active')});H.addEventListener('click',()=>_.clearRect(0,0,A.width,A.height));i.addEventListener('click',()=>{let aA=document.createElement('a');aA.download='my-drawing.png';aA.href=A.toDataURL();aA.click()});
